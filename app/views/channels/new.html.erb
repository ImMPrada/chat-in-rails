<h2 class="text-white"> add a new channel to <%= @workspace.name %> </h2>
<%=  turbo_frame_tag "new_channel_form" do %>
  <%=
    form_with(
      model: @channel,
      url: workspace_channels_path([@workspace, @channel]),
      class: "flex flex-col gap-1",
      data: { turbo: false }
    ) do |form| 
  %>
      <%= render partial: 'partials/form_fields/text_field', locals: { 
        form: form,
        model_field: :name,
        resource: @workspace,
        placeholder: "My new channel name",
        extra_classes: "rounded-none",
      } %>

      <% @workspace_members.each do |member| %>
        <% next if member == current_user %>
        <div class="flex gap-2">
          <label
            class="block w-full py-4 px-6 border text-white"
            for=<%="members_ids_selected_#{member.id}"%>
          >
            <%= member.username %>
            <%= check_box(
              :members_ids,
              "selected",
              { multiple: true },
              member.id,
              nil
            ) %>
          </label>
        </div>
      <% end %>

      <div class="flex justify-between gap-1">
        <%= form.submit(
          "create",
          class: "block btn rounded-l"
        ) %>
        <%= link_to(
          "cancel",
          workspace_path(@workspace),
          class: "block btn",
          data: { turbo: false }
        ) %>
      </div>
  <% end %>
<% end %>